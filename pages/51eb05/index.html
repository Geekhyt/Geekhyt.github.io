<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>HTTP的世界观 | 童欧巴博客</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="web前端技术博客,简洁至上,专注web前端学习与总结。JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github等技术文章。">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="code-1xXsjR4O7D">
    <meta name="theme-color" content="#11a8cd">
    <link rel="preload" href="/assets/css/0.styles.5d660632.css" as="style"><link rel="preload" href="/assets/js/app.e6110941.js" as="script"><link rel="preload" href="/assets/js/2.d5df4bac.js" as="script"><link rel="preload" href="/assets/js/3.91f688ac.js" as="script"><link rel="preload" href="/assets/js/61.b8c9ede6.js" as="script"><link rel="prefetch" href="/assets/js/10.3199ebec.js"><link rel="prefetch" href="/assets/js/11.23fcadef.js"><link rel="prefetch" href="/assets/js/12.c0606614.js"><link rel="prefetch" href="/assets/js/13.f31dd943.js"><link rel="prefetch" href="/assets/js/14.b62224fa.js"><link rel="prefetch" href="/assets/js/15.12d722d0.js"><link rel="prefetch" href="/assets/js/16.c18c577a.js"><link rel="prefetch" href="/assets/js/17.33db1aff.js"><link rel="prefetch" href="/assets/js/18.2169539d.js"><link rel="prefetch" href="/assets/js/19.80147783.js"><link rel="prefetch" href="/assets/js/20.750d5116.js"><link rel="prefetch" href="/assets/js/21.fd13e0c4.js"><link rel="prefetch" href="/assets/js/22.c2229ed4.js"><link rel="prefetch" href="/assets/js/23.2dffd82d.js"><link rel="prefetch" href="/assets/js/24.ed95c331.js"><link rel="prefetch" href="/assets/js/25.273f6808.js"><link rel="prefetch" href="/assets/js/26.f81c2466.js"><link rel="prefetch" href="/assets/js/27.ed1fa402.js"><link rel="prefetch" href="/assets/js/28.86bddcec.js"><link rel="prefetch" href="/assets/js/29.acb6ba1d.js"><link rel="prefetch" href="/assets/js/30.085db3bb.js"><link rel="prefetch" href="/assets/js/31.10a4a0ad.js"><link rel="prefetch" href="/assets/js/32.dab0f919.js"><link rel="prefetch" href="/assets/js/33.ff4e525c.js"><link rel="prefetch" href="/assets/js/34.4972fdf0.js"><link rel="prefetch" href="/assets/js/35.8eef4f2e.js"><link rel="prefetch" href="/assets/js/36.12e3a40e.js"><link rel="prefetch" href="/assets/js/37.1d8cac74.js"><link rel="prefetch" href="/assets/js/38.1b9d84f3.js"><link rel="prefetch" href="/assets/js/39.8da043e8.js"><link rel="prefetch" href="/assets/js/4.f0bed083.js"><link rel="prefetch" href="/assets/js/40.cad56f3f.js"><link rel="prefetch" href="/assets/js/41.078ff48e.js"><link rel="prefetch" href="/assets/js/42.ccab846c.js"><link rel="prefetch" href="/assets/js/43.505c53c7.js"><link rel="prefetch" href="/assets/js/44.cd659556.js"><link rel="prefetch" href="/assets/js/45.14dd0e87.js"><link rel="prefetch" href="/assets/js/46.1839d303.js"><link rel="prefetch" href="/assets/js/47.b210acd4.js"><link rel="prefetch" href="/assets/js/48.5748de13.js"><link rel="prefetch" href="/assets/js/49.0855ea96.js"><link rel="prefetch" href="/assets/js/5.3325315f.js"><link rel="prefetch" href="/assets/js/50.ec32b7d5.js"><link rel="prefetch" href="/assets/js/51.2bbf040f.js"><link rel="prefetch" href="/assets/js/52.3305d4e2.js"><link rel="prefetch" href="/assets/js/53.5ddbb2ed.js"><link rel="prefetch" href="/assets/js/54.66fb0ed1.js"><link rel="prefetch" href="/assets/js/55.502aea49.js"><link rel="prefetch" href="/assets/js/56.b8d4f0b6.js"><link rel="prefetch" href="/assets/js/57.631c9b6f.js"><link rel="prefetch" href="/assets/js/58.de68c1bb.js"><link rel="prefetch" href="/assets/js/59.a8e3322d.js"><link rel="prefetch" href="/assets/js/6.e60bc4f1.js"><link rel="prefetch" href="/assets/js/60.405df580.js"><link rel="prefetch" href="/assets/js/62.ad006f4a.js"><link rel="prefetch" href="/assets/js/63.3a8cad4b.js"><link rel="prefetch" href="/assets/js/64.7f3316c4.js"><link rel="prefetch" href="/assets/js/65.baee1c39.js"><link rel="prefetch" href="/assets/js/66.726c4408.js"><link rel="prefetch" href="/assets/js/67.03b35a22.js"><link rel="prefetch" href="/assets/js/7.a139d7a8.js"><link rel="prefetch" href="/assets/js/8.bb4f29c6.js"><link rel="prefetch" href="/assets/js/9.7d18e657.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5d660632.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/avatar.jpeg" alt="童欧巴博客" class="logo"> <span class="site-name can-hide">童欧巴博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/categories/" class="nav-link">分类</a></div><div class="nav-item"><a href="/tags/" class="nav-link">标签</a></div><div class="nav-item"><a href="/archives/" class="nav-link">归档</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/friends/" class="nav-link">友情链接</a></div> <a href="https://github.com/Geekhyt" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="http://hungryturbo.gitee.io/webcanteen/images/avatar.jpeg"> <div class="blogger-info"><h3>童欧巴</h3> <span>公众号【前端食堂】主理人</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/categories/" class="nav-link">分类</a></div><div class="nav-item"><a href="/tags/" class="nav-link">标签</a></div><div class="nav-item"><a href="/archives/" class="nav-link">归档</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/friends/" class="nav-link">友情链接</a></div> <a href="https://github.com/Geekhyt" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/pages/51eb05/" aria-current="page" class="active sidebar-link">HTTP的世界观</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/51eb05/#http的世界观" class="sidebar-link">HTTP的世界观</a></li><li class="sidebar-sub-header"><a href="/pages/51eb05/#http是什么？" class="sidebar-link">HTTP是什么？</a></li><li class="sidebar-sub-header"><a href="/pages/51eb05/#http-0-9" class="sidebar-link">HTTP/0.9</a></li><li class="sidebar-sub-header"><a href="/pages/51eb05/#http-1-0" class="sidebar-link">HTTP/1.0</a></li><li class="sidebar-sub-header"><a href="/pages/51eb05/#http-1-1" class="sidebar-link">HTTP/1.1</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/51eb05/#改进持久连接" class="sidebar-link">改进持久连接</a></li><li class="sidebar-sub-header"><a href="/pages/51eb05/#不成熟的http管线化" class="sidebar-link">不成熟的HTTP管线化</a></li><li class="sidebar-sub-header"><a href="/pages/51eb05/#增加对虚拟主机的支持" class="sidebar-link">增加对虚拟主机的支持</a></li><li class="sidebar-sub-header"><a href="/pages/51eb05/#增加对动态生产内容的支持" class="sidebar-link">增加对动态生产内容的支持</a></li><li class="sidebar-sub-header"><a href="/pages/51eb05/#客户端cookie、安全机制" class="sidebar-link">客户端Cookie、安全机制</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/51eb05/#http-2" class="sidebar-link">HTTP/2</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/51eb05/#http-1-1的缺陷" class="sidebar-link">HTTP/1.1的缺陷</a></li><li class="sidebar-sub-header"><a href="/pages/51eb05/#http-2多路复用" class="sidebar-link">HTTP/2多路复用</a></li><li class="sidebar-sub-header"><a href="/pages/51eb05/#http-2服务器推送" class="sidebar-link">HTTP/2服务器推送</a></li><li class="sidebar-sub-header"><a href="/pages/51eb05/#http-2头部压缩" class="sidebar-link">HTTP/2头部压缩</a></li><li class="sidebar-sub-header"><a href="/pages/51eb05/#http-2可以设置请求的优先级" class="sidebar-link">HTTP/2可以设置请求的优先级</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/51eb05/#http-3" class="sidebar-link">HTTP/3</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/51eb05/#http-2的缺陷" class="sidebar-link">HTTP/2的缺陷</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/51eb05/#quic协议" class="sidebar-link">QUIC协议</a></li><li class="sidebar-sub-header"><a href="/pages/51eb05/#参考：" class="sidebar-link">参考：</a></li></ul></li></ul> </aside> <div><main class="page"> <div class="theme-vdoing-wrapper bg-style-1"><div class="articleInfo-wrap" data-v-f5f35434><div class="articleInfo" data-v-f5f35434><ul class="breadcrumbs" data-v-f5f35434><li data-v-f5f35434><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-f5f35434></a></li> <li data-v-f5f35434><a href="/categories/?category=%E7%BD%91%E7%BB%9C%E5%8D%8F%E8%AE%AE" title="分类" data-v-f5f35434>网络协议</a></li> <!----></ul> <div class="info" data-v-f5f35434><div title="作者" class="author iconfont icon-touxiang" data-v-f5f35434><a href="https://github.com/Geekhyt" target="_blank" title="作者" class="beLink" data-v-f5f35434>童欧巴</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-f5f35434><a href="javascript:;" data-v-f5f35434>2019-11-10</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><!---->
          HTTP的世界观
        </h1> <div class="theme-vdoing-content content__default"><p>前端圈技术的爆发式增长随之而来的开发人员学不动的疲惫感、焦虑感和不想跳出舒适圈的拖延懒惰。</p> <p><code>jQuery</code>华丽谢幕，<code>React v16</code>已经普及、<code>Angular9</code>和<code>Vue3</code>即将发布。三大框架越来越贴近<code>WebComponents</code>标准。
<code>TypeScript</code>遍地开花，小程序日益火爆，快应用/PWA紧随其后……</p> <p>站在浪潮之巅的我们最需要的是停下来思考，轰轰烈烈的技术本质是什么？</p> <p>其实，<strong>轰轰烈烈的技术本质，是基础知识和核心概念</strong>。</p> <p>看你这篇题目的文章，是要讲HTTP咯？HTTP那么简单，我们大家每天都用，有什么好讲的？</p> <p>在停下来思考技术本质的同时，我们也要不断的提高自己的认识层次，你所谓的简单是因为你没有听到“遥远的哭声”。</p> <p align="center"><img src="https://cdn.jsdelivr.net/gh/Geekhyt/blogimgbed/blog/http0.png" width="500"></p> <p>(shout out to 男神黄执中)</p> <p>有请我们今天的主角登场：HTTP</p> <p>我将带你从HTTP的历史发展到各版本迭代主要特性来从全局的角度重新认识HTTP。</p> <h2 id="http的世界观"><a href="#http的世界观" class="header-anchor">#</a> HTTP的世界观</h2> <p>先来明确一下时间线，回到30年前的那个春天。</p> <p>一切的一切都始于1989年的3月，万维网之父蒂姆·伯纳斯·李(Tim Berners-Lee)的一篇论文，创造了万维网，创造了HTTP。</p> <ul><li><p>1991年<code>HTTP/0.9</code>发布  （没有RFC，版本号是后加上去的）</p></li> <li><p>1996年5月<code>HTTP/1.0</code>在<a href="https://tools.ietf.org/html/rfc1945" target="_blank" rel="noopener noreferrer">RFC1945<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>发布</p></li> <li><p>1997年1月<code>HTTP/1.1</code>发布 <a href="https://tools.ietf.org/html/rfc2616" target="_blank" rel="noopener noreferrer">RFC2616是当前最新版本<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p>2014年<code>HTTP/1.1</code>再次修订，将大文档拆分为六份较小的文档，
<a href="https://tools.ietf.org/html/rfc7230" target="_blank" rel="noopener noreferrer">RFC7230-7235<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></li> <li><p>2015年<code>HTTP/2</code>发布 <a href="https://tools.ietf.org/html/rfc7540" target="_blank" rel="noopener noreferrer">RFC7540<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> (基于谷歌的SPDY协议)</p></li> <li><p>2018年，互联网标准化组织<code>IETF</code>提议将<code>HTTP over QUIC</code>更名为<code>HTTP/3</code></p></li></ul> <p>如果希望全面的了解<code>HTTP/3</code>，推荐 <strong>Daniel Stenberg</strong>（CURL 作者）的<a href="https://http3-explained.haxx.se/en/" target="_blank" rel="noopener noreferrer">HTTP/3详解<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>当然如果你想看最新同步的中文，可以看我翻译的版本。
欢迎指正错误和Star<a href="https://hungryturbo.com/HTTP3-explained/" target="_blank" rel="noopener noreferrer">HTTP/3详解中文版<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>纵观HTTP的历史发展长河，究其原因，是技术和需求一直在推动着它的发展。</p> <h2 id="http是什么？"><a href="#http是什么？" class="header-anchor">#</a> HTTP是什么？</h2> <p><strong>HTTP是一个在计算机世界里专门在两点之间传输文字、图片、音频、视频等超文本数据的约定和规范。</strong></p> <p>HTTP通常跑在<code>TCP/IP协议栈</code>之上，依靠<code>IP协议实现寻址和路由</code>、<code>TCP协议实现可靠数据传输</code>、<code>DNS协议实现域名查找</code>、<code>SSL/TLS协议实现安全通信</code>。当然，WebSocket、HTTPDNS依赖于HTTP。</p> <h2 id="http-0-9"><a href="#http-0-9" class="header-anchor">#</a> HTTP/0.9</h2> <div class="language-http line-numbers-mode"><pre class="language-http"><code>GET/index.html
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>HTTP/0.9</code>当时是为了学术交流，基于请求和响应的模式，在网络中传输HTML超文本的内容。</p> <p>如上所示，只有一个请求行，没有HTTP请求头和请求体。同样，服务器也没有响应头信息，只是返回了数据。</p> <p>因为都是HTML格式的文件，决定了返回的文件内容通过<strong>ASCII字符流</strong>进行传输。</p> <h2 id="http-1-0"><a href="#http-1-0" class="header-anchor">#</a> HTTP/1.0</h2> <p>1994年低开启拨号上网，网景也在同年推出了第一款浏览器，人们对万维网的需求不再仅局限于学术交流。</p> <p>W3C和HTTP工作组<strong>HTTP-WG</strong>也在这个时代创建。为了满足人们对浏览器的需求(不光是HTML，还有CSS、JS、图片、音视频等)，文件格式不再局限于ASCII编码。</p> <p><code>HTTP/1.0</code>的解决办法是引入了请求头和响应头。</p> <div class="language-http line-numbers-mode"><pre class="language-http"><code><span class="token header-name keyword">accept:</span> text/html
<span class="token header-name keyword">accept-encoding:</span> gzip, deflate, br
<span class="token header-name keyword">accept-Charset:</span> ISO-8859-1,utf-8
<span class="token header-name keyword">accept-language:</span> zh-CN,zh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>同时也引入了<strong>状态码</strong>，为了减轻服务器的压力，提供了<strong>Cache机制</strong>。服务器需要统计客户端的基础信息(Windows 和 macOS)，加入了<strong>用户代理字段</strong>。</p> <h2 id="http-1-1"><a href="#http-1-1" class="header-anchor">#</a> HTTP/1.1</h2> <h3 id="改进持久连接"><a href="#改进持久连接" class="header-anchor">#</a> 改进持久连接</h3> <p>一个TCP连接上可以传输多个HTTP请求，只要浏览器或者服务器没有断开连接，该TCP会一直保持。</p> <p>持久连接是默认开启的，如果想要关闭，在请求头中加上<strong>Connection:close</strong>即可关闭。</p> <p>目前浏览器中对于同一个域名，默认允许同时建立6个TCP持久连接。</p> <h3 id="不成熟的http管线化"><a href="#不成熟的http管线化" class="header-anchor">#</a> 不成熟的HTTP管线化</h3> <p><code>HTTP/1.1</code> 中试图通过<strong>管线化的技术</strong>来解决队头阻塞的问题。但是因为各种原因，被各大厂商放弃治疗了。</p> <h3 id="增加对虚拟主机的支持"><a href="#增加对虚拟主机的支持" class="header-anchor">#</a> 增加对虚拟主机的支持</h3> <p><code>HTTP/1.0</code>中每个域名都只绑定唯一的IP地址，因此一个服务器只能支持一个域名。</p> <p>但是随着虚拟主机技术的发展，一台物理主机上绑定多个虚拟主机的需求大大提升，每个虚拟主机都有自己单独的域名，这些单独的域名都公用同一个IP地址。</p> <p>因此，请求头中也增加了<strong>Host字段</strong>，表示当前的域名地址，服务器可根据不同的Host值做不同的处理。</p> <h3 id="增加对动态生产内容的支持"><a href="#增加对动态生产内容的支持" class="header-anchor">#</a> 增加对动态生产内容的支持</h3> <p><code>HTTP/1.0</code>需要在响应头中设置完整的数据大小<strong>Content-Length：900</strong>，这样，浏览器就可以根据设置的数据大小来接收数据。</p> <p>由于服务器端技术发展，页面都是动态生成的，传输数据之前并不知道最终数据大小，
导致浏览器不知道何时会接受完所有的文件数据。</p> <p><code>HTTP/1.1</code>通过引入<strong>Chunk transfer机制</strong>来解决问题，服务器将数据分割成若干个任意大小的数据块，每个数据块发送时会附上上一个数据块的长度，最后使用一个长度为0的块作为发送数据完成的标志。</p> <h3 id="客户端cookie、安全机制"><a href="#客户端cookie、安全机制" class="header-anchor">#</a> 客户端Cookie、安全机制</h3> <p><code>HTTP1.1</code>引入了<strong>客户端Cookie机制</strong>和<strong>安全机制</strong>。</p> <h2 id="http-2"><a href="#http-2" class="header-anchor">#</a> HTTP/2</h2> <h3 id="http-1-1的缺陷"><a href="#http-1-1的缺陷" class="header-anchor">#</a> HTTP/1.1的缺陷</h3> <h4 id="对带宽的利用率不理想"><a href="#对带宽的利用率不理想" class="header-anchor">#</a> 对带宽的利用率不理想</h4> <h5 id="三个问题导致"><a href="#三个问题导致" class="header-anchor">#</a> 三个问题导致</h5> <ul><li><p>TCP 的慢启动</p></li> <li><p>同时开启了多条 TCP 连接，那么这些连接会竞争固定的带宽</p></li> <li><p><code>HTTP/1.1</code> 队头阻塞的问题</p></li></ul> <h3 id="http-2多路复用"><a href="#http-2多路复用" class="header-anchor">#</a> HTTP/2多路复用</h3> <p><code>HTTP/2</code>使用多路复用机制解决了上述问题。</p> <p>一个域名只使用一个 TCP 长连接和消除队头阻塞问题。通过引入<strong>二进制分帧层</strong>，实现了 HTTP 的多路复用技术。</p> <h3 id="http-2服务器推送"><a href="#http-2服务器推送" class="header-anchor">#</a> HTTP/2服务器推送</h3> <p>服务器可以提前将数据推送到浏览器，浏览器有权选择是否接受。浏览器发送<strong>RST_STREAM帧</strong>可以选择拒收。</p> <h3 id="http-2头部压缩"><a href="#http-2头部压缩" class="header-anchor">#</a> HTTP/2头部压缩</h3> <p>头部的压缩大大的提升了传输效率。HTTP/2开发了“HPACK”算法，在客户端和服务器建立“字典”，用索引号表示重复的字符串，还采用哈夫曼编码来压缩整数和字符串。</p> <h3 id="http-2可以设置请求的优先级"><a href="#http-2可以设置请求的优先级" class="header-anchor">#</a> HTTP/2可以设置请求的优先级</h3> <p>可以设置让某些重要的数据优先被服务器处理并返回。</p> <h2 id="http-3"><a href="#http-3" class="header-anchor">#</a> HTTP/3</h2> <h3 id="http-2的缺陷"><a href="#http-2的缺陷" class="header-anchor">#</a> HTTP/2的缺陷</h3> <h4 id="tcp的队头阻塞"><a href="#tcp的队头阻塞" class="header-anchor">#</a> TCP的队头阻塞</h4> <p>在 TCP 传输过程中，由于单个数据包的丢失而造成的阻塞称为 TCP 上的队头阻塞。
<code>HTTP/2</code>只解决了应用层面的队头阻塞，队头阻塞的问题还存在于TCP协议本身。</p> <h4 id="tcp建立连接的延时"><a href="#tcp建立连接的延时" class="header-anchor">#</a> TCP建立连接的延时</h4> <p><code>TCP</code>以及<code>TCP+TLS</code>建立连接的所产生的延时也是影响传输效率的一个主要因素。</p> <h4 id="tcp协议僵化"><a href="#tcp协议僵化" class="header-anchor">#</a> TCP协议僵化</h4> <h5 id="中间件僵化"><a href="#中间件僵化" class="header-anchor">#</a> 中间件僵化</h5> <p>我们把在互联网的各处搭建的设备叫做中间设备(中间件)，比如路由器、NAT、防火墙、交换机等，它们通常依赖一些很少升级的软件，这些软件使用了大量的 TCP 特性，设置之后便很少进行更新。这就对我们我们更新TCP的时候造成了很大的困难，
新协议的数据包经过这些中间件时，它们不会去理解包的内容从而丢弃掉这些数据包。</p> <h5 id="操作系统"><a href="#操作系统" class="header-anchor">#</a> 操作系统</h5> <p>因为 TCP 协议都是通过操作系统内核来实现的，应用程序只能使用不能修改。通常操作系统的更新都滞后于软件的更新，所以想要更新操作系统内核中的TCP协议也是非常困难的。</p> <h2 id="quic协议"><a href="#quic协议" class="header-anchor">#</a> QUIC协议</h2> <p><code>HTTP/3</code> 选择了一个折衷的方法——UDP 协议，<strong>基于 UDP 实现了类似于 TCP 的多路数据流、传输可靠性等功能，我们把这套功能称为QUIC 协议</strong>。</p> <ul><li><p>实现了类似 TCP 的流量控制、传输可靠性的功能</p></li> <li><p>集成了 TLS 加密功能</p></li> <li><p>实现了 HTTP/2 中的多路复用功能</p></li> <li><p>实现了快速握手功能</p></li></ul> <p>关于HTTP/3更多详细的内容，请移步我翻译成中文版的<a href="https://hungryturbo.com/HTTP3-explained/quic/%E5%BC%95%E8%A8%80.html" target="_blank" rel="noopener noreferrer">HTTP/3详解<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <p>欢迎Star<a href="https://github.com/Geekhyt/HTTP3-explained" target="_blank" rel="noopener noreferrer">仓库链接<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>和提出错误或不对的地方。</p> <h2 id="参考："><a href="#参考：" class="header-anchor">#</a> 参考：</h2> <p>《浏览器工作原理与实践》</p> <p>《透视HTTP协议》</p> <p>《趣谈网络协议》</p> <p>《Web协议详解与抓包实战》</p></div></div> <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=HTTP" title="标签">#HTTP</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2020/10/01, 19:10:00</span></div></div> <div class="page-nav-wapper"><!----> <!----></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/fa7f62/"><div>教女朋友学前端之深入理解JS引擎</div></a> <span>08-16</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/aa01e0/"><div>如何打造高效好用的终端？拿来吧你！</div></a> <span>07-14</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/c0e0d4/"><div>假如易立竞问你如何判断 JavaScript 中的数据类型？</div></a> <span>06-08</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div> </main></div> <div class="footer"><div class="icons"><a href="mailto:hungryturbo@gmail.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/Geekhyt" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://juejin.im/user/3491704662669469" title="掘金" target="_blank" class="iconfont icon-juejin"></a><a href="https://www.zhihu.com/people/huo-yi-tong-98" title="知乎" target="_blank" class="iconfont icon-zhihu"></a><a href="https://weibo.com/u/2771284557" title="微博" target="_blank" class="iconfont icon-weibo"></a><a href="https://space.bilibili.com/161753278" title="哔哩哔哩" target="_blank" class="iconfont icon-bilibili"></a></div> 
        © 2019-2021
        <span>童欧巴 | hungryturbo</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">跟随系统</li><li class="iconfont icon-rijianmoshi">浅色模式</li><li class="iconfont icon-yejianmoshi">深色模式</li><li class="iconfont icon-yuedu">阅读模式</li></ul></div></div> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.e6110941.js" defer></script><script src="/assets/js/2.d5df4bac.js" defer></script><script src="/assets/js/3.91f688ac.js" defer></script><script src="/assets/js/61.b8c9ede6.js" defer></script>
  </body>
</html>